<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Motoboy</title>
    <style>
        /* Estilo B√°sico para organizar sem mudar tudo */
        body { font-family: Arial, sans-serif; margin: 20px; }
        .box { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .resumo { display: flex; gap: 20px; margin-bottom: 20px; }
        .card { border: 1px solid #ddd; padding: 10px; flex: 1; text-align: center; }
        .entrada { color: green; }
        .saida { color: red; }
        
        /* Estilo da Barra de Meta */
        .barra-fundo { width: 100%; background-color: #e0e0e0; height: 25px; border-radius: 5px; margin-top: 5px; }
        .barra-progresso { height: 100%; background-color: #4caf50; text-align: center; line-height: 25px; color: white; border-radius: 5px; transition: width 0.5s; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>Ol√°, {{ nome }}</h1>
        <a href="{{ url_for('logout') }}" style="color: red;">Sair</a>
    </div>

    <div class="box">
        <h3>üéØ Meta do Dia: R$ {{ meta }}</h3>
        
        <div class="barra-fundo">
            <div class="barra-progresso" style="width: {{ largura_barra }}%;">
                {{ porcentagem }}%
            </div>
        </div>
        <p>Faltam: <strong>R$ {{ '%.2f'|format(meta - fat_dia) if fat_dia < meta else 0 }}</strong></p>

        <form action="{{ url_for('definir_meta') }}" method="POST" style="margin-top: 10px;">
            <label>Definir nova meta:</label>
            <input type="number" name="meta" step="0.01" value="{{ meta }}" required>
            <button type="submit">Salvar</button>
        </form>
    </div>

    <div class="resumo">
        <div class="card">
            <h3>Ganho Hoje</h3>
            <h2 class="entrada">R$ {{ fat_dia }}</h2>
        </div>
        <div class="card">
            <h3>Gasto Hoje</h3>
            <h2 class="saida">R$ {{ gasto_dia }}</h2>
        </div>
        <div class="card">
            <h3>Saldo</h3>
            <h2 style="color: blue;">R$ {{ saldo_dia }}</h2>
        </div>
    </div>

    <div class="box">
        <h3>Adicionar Novo Lan√ßamento</h3>
        <form action="{{ url_for('adicionar') }}" method="POST">
            <select name="tipo" required>
                <option value="entrada">Ganho (Entrada)</option>
                <option value="saida">Gasto (Sa√≠da)</option>
            </select>
            <input type="text" name="descricao" placeholder="Descri√ß√£o (ex: Ifood)" required>
            <input type="number" name="valor" step="0.01" placeholder="Valor (R$)" required>
            <button type="submit">Adicionar</button>
        </form>
    </div>

    <h3>√öltimas Movimenta√ß√µes</h3>
    <table>
        <thead>
            <tr>
                <th>Tipo</th>
                <th>Descri√ß√£o</th>
                <th>Valor</th>
            </tr>
        </thead>
        <tbody>
            {% for t in transacoes %}
            <tr>
                <td class="{{ 'entrada' if t.tipo == 'entrada' else 'saida' }}">
                    {{ 'Entrada' if t.tipo == 'entrada' else 'Sa√≠da' }}
                </td>
                <td>{{ t.descricao }}</td>
                <td>R$ {{ t.valor }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="3" style="text-align: center;">Nenhuma movimenta√ß√£o hoje.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</body>
</html>